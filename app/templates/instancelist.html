{% extends "frame.html" %}
{% set level1_name='index' %}
{% set level2_name='instance_list' %}
{% block page_wrapper %}
    <!-- this is the main content section to be overwritten -->
    <!-- /.row -->
    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <!-- Nav tabs -->
                    <ul class="nav nav-pills" role="tablist">
                        <li role="presentation" class="active"><a href="#online" role="tab" data-toggle="tab">Inuse</a></li>
                        <li role="presentation"><a href="#free" role="tab" data-toggle="tab">Free</a></li>
                        <li role="presentation"><a href="#all" role="tab" data-toggle="tab">All Servers</a></li>
                    </ul>
                </div>
                <div class="panel-body">
                    <!-- panel body -->
                    <div class="tab-content">
                        <div role="tabpanel" class="tab-pane active" id="online">
                            <div class="table-responsive">
                                 <table class="table" id="onlineinstlist">
                                 <thead>
                                 <tr>
                                 <th>#</th>
                                 <th>SerialNo</th>
                                 <th>Port</th>
                                 <th>Type</th>
                                 <th>DBA</th>
                                 <th>Biz Owner</th>
                                 <th>Online Time</th>
                                 <th>Operation</th>
                                 </tr>
                                 </thead>
                                 <tbody>
                                 {%  if data['page_data']  %}
                                 {% for row in data['page_data'] %}
                                 {% if row['status'] == '在线' %}
                                 <tr class="odd gradeX">
                                 <td> {{ loop.index }} </td>
                                 {% for attr in ['server_id','port','type','DBA_owner','Jon_owner','online_time'] %}
                                 <td>
                                 {% if attr == 'server_id' %}
                                 <a href="{{ url_for('server_info', server_id=row['server_id']) }}" type="button" class="btn btn-info btn-xs">
                                 {{ row['server_id'] }}
                                 </a>
                                 {% else %}
                                 {% if row[attr] %}
                                 {{ row[attr] }}
                                 {% endif %}
                                 {% endif %}
                                 </td>
                                 {% endfor %}
                                 <td>
                                 <button href="{{ url_for('server_info', server_id = row['server_id']) }}" type="button" class="btn btn-primary btn-xs">Info</button>
                                 </td>
                                 </tr>
                                 {% endif %}
                                 {% endfor %}
                                 {% endif %}
                                 </tbody>
                                 </table>
                                 </div>
                        </div>
                        <div role="tabpanel" class="tab-pane" id="free">
                            <div class="table-responsive"> </div>
                        </div>
                        <div role="tabpanel" class="tab-pane" id="all">
                          <div class="table-responsive">
                          <table class="table table-striped table-bordered table-hover" id="allinstlist">
                              <thead>
                                  <tr>
                                      <th>#</th>
                                      <th>SerialNo</th>
                                      <th>Port</th>
                                      <th>Type</th>
                                      <th>DBA</th>
                                      <th>Biz Owner</th>
                                      <th>Status</th>
                                      <th>Online Time</th>
                                      <th>Operation</th>
                                  </tr>
                              </thead>
                              <tbody>
                                  {%  if data['page_data']  %}
                                  {% for row in data['page_data'] %}
                                      <tr class="odd gradeX">
                                      <td> {{ loop.index }} </td>
                                      {% for attr in ['server_id','port','type','DBA_Owner','Jon_Owner','status','online_time'] %}
                                          <td>
                                          {% if attr == 'server_id' %}
                                              <a href="{{ url_for('server_info', server_id=row['server_id']) }}" type="button" class="btn btn-primary">
                                              {{ row['server_id'] }}
                                              </a>
                                          {% else %}
                                              {% if row[attr] %}
                                                  {{ row[attr] }}
                                              {% endif %}
                                          {% endif %}
                                          </td>
                                      {% endfor %}
                                      <td>
                                          <button href="{{ url_for('server_info', server_id = row['server_id']) }}" type="button" class="btn btn-primary">
                                              Info
                                          </button>
                                      </td>
                                      </tr>
                                  {% endfor %}
                                  {% endif %}
                              </tbody>
                          </table>
                          </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->
{% endblock %}
{% block script %}
    {{ super() }}
    <script>
        $(document).ready(function() {
            $('#onlineinstlist').dataTable({
                'order':
                        [0, 'asc'],
                'columns': [
                    {"orderable":false},
                    {"orderable":false},
                    {"orderable":false},
                    {"orderable":false},
                    {"orderable":false},
                    {"orderable":false},
                    {"orderable":true},
                    {"orderable":false}
                ]
            });
            $('#allinstlist').dataTable({
                'order':
                        [0, 'asc'],
                'columns': [
                    {"orderable":false},
                    {"orderable":false},
                    {"orderable":false},
                    {"orderable":false},
                    {"orderable":false},
                    {"orderable":false},
                    {"orderable":false},
                    {"orderable":true},
                    {"orderable":false}
                ]
            });
        });
    </script>
{% endblock %}

